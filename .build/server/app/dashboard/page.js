(()=>{var e={};e.id=702,e.ids=[702],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},86624:e=>{"use strict";e.exports=require("querystring")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},49463:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>o,routeModule:()=>h,tree:()=>d}),r(58059),r(80077),r(71363);var a=r(36576),t=r(72007),l=r(21818),i=r.n(l),n=r(88897),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);r.d(s,c);let d=["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,58059)),"/home/ubuntu/surgical_research_platform/nextjs_space/app/dashboard/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,80077)),"/home/ubuntu/surgical_research_platform/nextjs_space/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,71363,23)),"next/dist/client/components/not-found-error"]}],o=["/home/ubuntu/surgical_research_platform/nextjs_space/app/dashboard/page.tsx"],u="/dashboard/page",x={require:r,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},56408:(e,s,r)=>{Promise.resolve().then(r.bind(r,4406)),Promise.resolve().then(r.bind(r,21395)),Promise.resolve().then(r.t.bind(r,95003,23))},21395:(e,s,r)=>{"use strict";r.d(s,{Progress:()=>N});var a=r(62901),t=r(24383),l=r(89291),i=r(74132),n="Progress",[c,d]=(0,l.b)(n),[o,u]=c(n),x=t.forwardRef((e,s)=>{var r,t;let{__scopeProgress:l,value:n=null,max:c,getValueLabel:d=p,...u}=e;(c||0===c)&&!g(c)&&console.error((r=`${c}`,`Invalid prop \`max\` of value \`${r}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let x=g(c)?c:100;null===n||v(n,x)||console.error((t=`${n}`,`Invalid prop \`value\` of value \`${t}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let h=v(n,x)?n:null,m=j(h)?d(h,x):void 0;return(0,a.jsx)(o,{scope:l,value:h,max:x,children:(0,a.jsx)(i.WV.div,{"aria-valuemax":x,"aria-valuemin":0,"aria-valuenow":j(h)?h:void 0,"aria-valuetext":m,role:"progressbar","data-state":f(h,x),"data-value":h??void 0,"data-max":x,...u,ref:s})})});x.displayName=n;var h="ProgressIndicator",m=t.forwardRef((e,s)=>{let{__scopeProgress:r,...t}=e,l=u(h,r);return(0,a.jsx)(i.WV.div,{"data-state":f(l.value,l.max),"data-value":l.value??void 0,"data-max":l.max,...t,ref:s})});function p(e,s){return`${Math.round(e/s*100)}%`}function f(e,s){return null==e?"indeterminate":e===s?"complete":"loading"}function j(e){return"number"==typeof e}function g(e){return j(e)&&!isNaN(e)&&e>0}function v(e,s){return j(e)&&!isNaN(e)&&e<=s&&e>=0}m.displayName=h;var y=r(68637);let N=t.forwardRef(({className:e,value:s,...r},t)=>a.jsx(x,{ref:t,className:(0,y.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:a.jsx(m,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));N.displayName=x.displayName},58059:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>q});var a=r(83537),t=r(15649),l=r(11826),i=r(15438),n=r(83178),c=r(32944),d=r(24429),o=r(31376),u=r(81331),x=r(27244);let h=(0,r(88895).createProxy)(String.raw`/home/ubuntu/surgical_research_platform/nextjs_space/components/ui/progress.tsx#Progress`);var m=r(85168),p=r(11293),f=r(88621),j=r(25201),g=r(75414),v=r(22932),y=r(86132),N=r(28315),b=r(80941),w=r(89941),_=r(99396),Z=r(50853),P=r(64761);async function q(){let e=await (0,t.getServerSession)(l.L);e?.user||(0,i.redirect)("/auth/signin");let[s,r,q,k]=await Promise.all([n._.user.findUnique({where:{id:e.user.id},include:{_count:{select:{enrollments:!0,courses:!0,articles:!0,chatSessions:!0}}}}),n._.course.findMany({where:{published:!0},include:{author:{select:{name:!0,fullName:!0}},category:{select:{name:!0,color:!0}},_count:{select:{enrollments:!0,lessons:!0}}},orderBy:{createdAt:"desc"},take:6}),n._.article.findMany({where:{published:!0,featured:!0},include:{author:{select:{name:!0,fullName:!0}},category:{select:{name:!0,color:!0}}},orderBy:{createdAt:"desc"},take:4}),n._.progress.findMany({where:{userId:e.user.id},include:{course:{select:{title:!0,slug:!0,coverImage:!0,difficulty:!0}}},orderBy:{lastAccessedAt:"desc"},take:5})]),C=[{title:"Мои курсы",value:s?._count?.enrollments||0,icon:p.Z,color:"text-blue-600 bg-blue-100",href:"/courses"},{title:"Создано курсов",value:s?._count?.courses||0,icon:f.Z,color:"text-green-600 bg-green-100",href:"/courses/create",adminOnly:!0},{title:"Статьи",value:s?._count?.articles||0,icon:j.Z,color:"text-purple-600 bg-purple-100",href:"/articles"},{title:"AI Сессии",value:s?._count?.chatSessions||0,icon:g.Z,color:"text-orange-600 bg-orange-100",href:"/ai-search"}],z="ADMIN"===e.user.role,M="TEACHER"===e.user.role||z;return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[a.jsx(c.h,{}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Добро пожаловать, ",e.user.name,"!"]}),a.jsx("p",{className:"text-gray-600",children:e.user.specialization?`Специализация: ${e.user.specialization}`:"Продолжайте изучение хирургических дисциплин"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:C.filter(e=>!e.adminOnly||M).map(e=>a.jsx(o.Zb,{children:(0,a.jsxs)(o.aY,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:e.title}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.value})]}),a.jsx("div",{className:`p-3 rounded-full ${e.color}`,children:a.jsx(e.icon,{className:"h-5 w-5"})})]}),a.jsx(u.z,{variant:"ghost",size:"sm",className:"mt-3 p-0 h-auto",asChild:!0,children:(0,a.jsxs)(m.default,{href:e.href,children:["Перейти ",a.jsx(v.Z,{className:"ml-1 h-3 w-3"})]})})]})},e.title))}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[k.length>0&&(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsxs)(o.ll,{className:"flex items-center",children:[a.jsx(y.Z,{className:"h-5 w-5 mr-2"}),"Мой прогресс"]}),a.jsx(o.SZ,{children:"Последние изученные курсы"})]}),(0,a.jsxs)(o.aY,{className:"space-y-4",children:[k.map(e=>(0,a.jsxs)("div",{className:"border rounded-lg p-4",children:[a.jsx("div",{className:"flex items-start justify-between mb-2",children:(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx(m.default,{href:`/courses/${e.course.slug}`,className:"font-medium text-gray-900 hover:text-blue-600",children:e.course.title}),a.jsx("div",{className:"flex items-center space-x-2 mt-1",children:a.jsx(x.C,{className:(0,P.dr)(e.course.difficulty),children:(0,P.mq)(e.course.difficulty)})})]})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsxs)("span",{children:["Прогресс: ",e.completedLessons," из ",e.totalLessons]}),(0,a.jsxs)("span",{children:[Math.round(e.progressPercentage),"%"]})]}),a.jsx(h,{value:e.progressPercentage,className:"h-2"})]})]},e.id)),a.jsx(u.z,{variant:"outline",className:"w-full",asChild:!0,children:a.jsx(m.default,{href:"/courses",children:"Все мои курсы"})})]})]}),(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsxs)(o.ll,{className:"flex items-center",children:[a.jsx(p.Z,{className:"h-5 w-5 mr-2"}),"Новые курсы"]}),a.jsx(o.SZ,{children:"Последние добавленные курсы"})]}),(0,a.jsxs)(o.aY,{className:"space-y-4",children:[r.slice(0,4).map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-3 border rounded-lg hover:bg-gray-50 transition-colors",children:[a.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:a.jsx(p.Z,{className:"h-5 w-5 text-blue-600"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx(m.default,{href:`/courses/${e.slug}`,className:"font-medium text-gray-900 hover:text-blue-600 block truncate",children:e.title}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[a.jsx(x.C,{variant:"secondary",className:"text-xs",children:e.category.name}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[e._count.lessons," уроков"]})]})]}),a.jsx(u.z,{size:"sm",variant:"ghost",asChild:!0,children:a.jsx(m.default,{href:`/courses/${e.slug}`,children:a.jsx(N.Z,{className:"h-4 w-4"})})})]},e.id)),a.jsx(u.z,{variant:"outline",className:"w-full",asChild:!0,children:a.jsx(m.default,{href:"/courses",children:"Все курсы"})})]})]}),q.length>0&&(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsxs)(o.ll,{className:"flex items-center",children:[a.jsx(b.Z,{className:"h-5 w-5 mr-2"}),"Рекомендуемые статьи"]}),a.jsx(o.SZ,{children:"Избранные научные публикации"})]}),(0,a.jsxs)(o.aY,{className:"space-y-4",children:[q.slice(0,3).map(e=>(0,a.jsxs)("div",{className:"border rounded-lg p-4",children:[a.jsx(m.default,{href:`/articles/${e.slug}`,className:"font-medium text-gray-900 hover:text-blue-600 block mb-2",children:e.title}),a.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:e.excerpt}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[a.jsx("span",{children:e.author.fullName||e.author.name}),a.jsx("span",{children:(0,P.p6)(e.createdAt)})]})]},e.id)),a.jsx(u.z,{variant:"outline",className:"w-full",asChild:!0,children:a.jsx(m.default,{href:"/articles",children:"Все статьи"})})]})]}),(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[a.jsx(o.ll,{children:"Быстрые действия"}),a.jsx(o.SZ,{children:"Основные функции платформы"})]}),(0,a.jsxs)(o.aY,{className:"space-y-3",children:[a.jsx(u.z,{className:"w-full justify-start",asChild:!0,children:(0,a.jsxs)(m.default,{href:"/ai-search",children:[a.jsx(g.Z,{className:"h-4 w-4 mr-2"}),"AI Поиск и Чат"]})}),a.jsx(u.z,{variant:"outline",className:"w-full justify-start",asChild:!0,children:(0,a.jsxs)(m.default,{href:"/fhir",children:[a.jsx(w.Z,{className:"h-4 w-4 mr-2"}),"FHIR Данные"]})}),z&&(0,a.jsxs)(a.Fragment,{children:[a.jsx(u.z,{variant:"outline",className:"w-full justify-start",asChild:!0,children:(0,a.jsxs)(m.default,{href:"/admin/users",children:[a.jsx(_.Z,{className:"h-4 w-4 mr-2"}),"Управление пользователями"]})}),a.jsx(u.z,{variant:"outline",className:"w-full justify-start",asChild:!0,children:(0,a.jsxs)(m.default,{href:"/admin/analytics",children:[a.jsx(Z.Z,{className:"h-4 w-4 mr-2"}),"Аналитика"]})})]}),M&&a.jsx(u.z,{variant:"outline",className:"w-full justify-start",asChild:!0,children:(0,a.jsxs)(m.default,{href:"/courses/create",children:[a.jsx(f.Z,{className:"h-4 w-4 mr-2"}),"Создать курс"]})})]})]})]})]}),a.jsx(d.$,{})]})}},50853:(e,s,r)=>{"use strict";r.d(s,{Z:()=>a});let a=(0,r(89004).Z)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},28315:(e,s,r)=>{"use strict";r.d(s,{Z:()=>a});let a=(0,r(89004).Z)("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]])},88621:(e,s,r)=>{"use strict";r.d(s,{Z:()=>a});let a=(0,r(89004).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},80941:(e,s,r)=>{"use strict";r.d(s,{Z:()=>a});let a=(0,r(89004).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])}};var s=require("../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),a=s.X(0,[372,38,594,718,201,847,329,3,437,552,210],()=>r(49463));module.exports=a})();