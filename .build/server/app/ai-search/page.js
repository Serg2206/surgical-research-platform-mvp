(()=>{var e={};e.id=277,e.ids=[277],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},67097:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>h,pages:()=>d,routeModule:()=>p,tree:()=>c}),t(99443),t(80077),t(71363);var l=t(36576),s=t(72007),a=t(21818),n=t.n(a),i=t(88897),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);t.d(r,o);let c=["",{children:["ai-search",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,99443)),"/home/ubuntu/surgical_research_platform/nextjs_space/app/ai-search/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,80077)),"/home/ubuntu/surgical_research_platform/nextjs_space/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,71363,23)),"next/dist/client/components/not-found-error"]}],d=["/home/ubuntu/surgical_research_platform/nextjs_space/app/ai-search/page.tsx"],h="/ai-search/page",u={require:t,loadChunk:()=>Promise.resolve()},p=new l.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/ai-search/page",pathname:"/ai-search",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},93354:(e,r,t)=>{Promise.resolve().then(t.bind(t,4406)),Promise.resolve().then(t.bind(t,30846)),Promise.resolve().then(t.t.bind(t,95003,23))},30846:(e,r,t)=>{"use strict";t.d(r,{ClientAISearch:()=>ex});var l=t(62901),s=t(24383),a=t(84700),n=t(27878),i=t(250),o=t(23803),c=t(74132),d=t(52490),h=t(89291),u=t(56163),p=t(81609),x=t(1861),m=t(41790),f=t(48546),v=t(1940),g="ScrollArea",[w,j]=(0,h.b)(g),[y,b]=w(g),N=s.forwardRef((e,r)=>{let{__scopeScrollArea:t,type:a="hover",dir:n,scrollHideDelay:i=600,...o}=e,[d,h]=s.useState(null),[p,m]=s.useState(null),[f,v]=s.useState(null),[g,w]=s.useState(null),[j,b]=s.useState(null),[N,S]=s.useState(0),[C,E]=s.useState(0),[R,_]=s.useState(!1),[P,k]=s.useState(!1),T=(0,u.e)(r,e=>h(e)),L=(0,x.gm)(n);return(0,l.jsx)(y,{scope:t,type:a,dir:L,scrollHideDelay:i,scrollArea:d,viewport:p,onViewportChange:m,content:f,onContentChange:v,scrollbarX:g,onScrollbarXChange:w,scrollbarXEnabled:R,onScrollbarXEnabledChange:_,scrollbarY:j,onScrollbarYChange:b,scrollbarYEnabled:P,onScrollbarYEnabledChange:k,onCornerWidthChange:S,onCornerHeightChange:E,children:(0,l.jsx)(c.WV.div,{dir:L,...o,ref:T,style:{position:"relative","--radix-scroll-area-corner-width":N+"px","--radix-scroll-area-corner-height":C+"px",...e.style}})})});N.displayName=g;var S="ScrollAreaViewport",C=s.forwardRef((e,r)=>{let{__scopeScrollArea:t,children:a,nonce:n,...i}=e,o=b(S,t),d=s.useRef(null),h=(0,u.e)(r,d,o.onViewportChange);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),(0,l.jsx)(c.WV.div,{"data-radix-scroll-area-viewport":"",...i,ref:h,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:(0,l.jsx)("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:a})})]})});C.displayName=S;var E="ScrollAreaScrollbar",R=s.forwardRef((e,r)=>{let{forceMount:t,...a}=e,n=b(E,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=n,c="horizontal"===e.orientation;return s.useEffect(()=>(c?i(!0):o(!0),()=>{c?i(!1):o(!1)}),[c,i,o]),"hover"===n.type?(0,l.jsx)(_,{...a,ref:r,forceMount:t}):"scroll"===n.type?(0,l.jsx)(P,{...a,ref:r,forceMount:t}):"auto"===n.type?(0,l.jsx)(k,{...a,ref:r,forceMount:t}):"always"===n.type?(0,l.jsx)(T,{...a,ref:r}):null});R.displayName=E;var _=s.forwardRef((e,r)=>{let{forceMount:t,...a}=e,n=b(E,e.__scopeScrollArea),[i,o]=s.useState(!1);return s.useEffect(()=>{let e=n.scrollArea,r=0;if(e){let t=()=>{window.clearTimeout(r),o(!0)},l=()=>{r=window.setTimeout(()=>o(!1),n.scrollHideDelay)};return e.addEventListener("pointerenter",t),e.addEventListener("pointerleave",l),()=>{window.clearTimeout(r),e.removeEventListener("pointerenter",t),e.removeEventListener("pointerleave",l)}}},[n.scrollArea,n.scrollHideDelay]),(0,l.jsx)(d.z,{present:t||i,children:(0,l.jsx)(k,{"data-state":i?"visible":"hidden",...a,ref:r})})}),P=s.forwardRef((e,r)=>{var t,a;let{forceMount:n,...i}=e,o=b(E,e.__scopeScrollArea),c="horizontal"===e.orientation,h=B(()=>p("SCROLL_END"),100),[u,p]=(t="hidden",a={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},s.useReducer((e,r)=>a[e][r]??e,t));return s.useEffect(()=>{if("idle"===u){let e=window.setTimeout(()=>p("HIDE"),o.scrollHideDelay);return()=>window.clearTimeout(e)}},[u,o.scrollHideDelay,p]),s.useEffect(()=>{let e=o.viewport,r=c?"scrollLeft":"scrollTop";if(e){let t=e[r],l=()=>{let l=e[r];t!==l&&(p("SCROLL"),h()),t=l};return e.addEventListener("scroll",l),()=>e.removeEventListener("scroll",l)}},[o.viewport,c,p,h]),(0,l.jsx)(d.z,{present:n||"hidden"!==u,children:(0,l.jsx)(T,{"data-state":"hidden"===u?"hidden":"visible",...i,ref:r,onPointerEnter:(0,v.M)(e.onPointerEnter,()=>p("POINTER_ENTER")),onPointerLeave:(0,v.M)(e.onPointerLeave,()=>p("POINTER_LEAVE"))})})}),k=s.forwardRef((e,r)=>{let t=b(E,e.__scopeScrollArea),{forceMount:a,...n}=e,[i,o]=s.useState(!1),c="horizontal"===e.orientation,h=B(()=>{if(t.viewport){let e=t.viewport.offsetWidth<t.viewport.scrollWidth,r=t.viewport.offsetHeight<t.viewport.scrollHeight;o(c?e:r)}},10);return G(t.viewport,h),G(t.content,h),(0,l.jsx)(d.z,{present:a||i,children:(0,l.jsx)(T,{"data-state":i?"visible":"hidden",...n,ref:r})})}),T=s.forwardRef((e,r)=>{let{orientation:t="vertical",...a}=e,n=b(E,e.__scopeScrollArea),i=s.useRef(null),o=s.useRef(0),[c,d]=s.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=$(c.viewport,c.content),u={...a,sizes:c,onSizesChange:d,hasThumb:!!(h>0&&h<1),onThumbChange:e=>i.current=e,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:e=>o.current=e};function p(e,r){return function(e,r,t,l="ltr"){let s=V(t),a=r||s/2,n=t.scrollbar.paddingStart+a,i=t.scrollbar.size-t.scrollbar.paddingEnd-(s-a),o=t.content-t.viewport;return U([n,i],"ltr"===l?[0,o]:[-1*o,0])(e)}(e,o.current,c,r)}return"horizontal"===t?(0,l.jsx)(L,{...u,ref:r,onThumbPositionChange:()=>{if(n.viewport&&i.current){let e=X(n.viewport.scrollLeft,c,n.dir);i.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{n.viewport&&(n.viewport.scrollLeft=e)},onDragScroll:e=>{n.viewport&&(n.viewport.scrollLeft=p(e,n.dir))}}):"vertical"===t?(0,l.jsx)(A,{...u,ref:r,onThumbPositionChange:()=>{if(n.viewport&&i.current){let e=X(n.viewport.scrollTop,c);i.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{n.viewport&&(n.viewport.scrollTop=e)},onDragScroll:e=>{n.viewport&&(n.viewport.scrollTop=p(e))}}):null}),L=s.forwardRef((e,r)=>{let{sizes:t,onSizesChange:a,...n}=e,i=b(E,e.__scopeScrollArea),[o,c]=s.useState(),d=s.useRef(null),h=(0,u.e)(r,d,i.onScrollbarXChange);return s.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),(0,l.jsx)(M,{"data-orientation":"horizontal",...n,ref:h,sizes:t,style:{bottom:0,left:"rtl"===i.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===i.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":V(t)+"px",...e.style},onThumbPointerDown:r=>e.onThumbPointerDown(r.x),onDragScroll:r=>e.onDragScroll(r.x),onWheelScroll:(r,t)=>{if(i.viewport){let l=i.viewport.scrollLeft+r.deltaX;e.onWheelScroll(l),function(e,r){return e>0&&e<r}(l,t)&&r.preventDefault()}},onResize:()=>{d.current&&i.viewport&&o&&a({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:q(o.paddingLeft),paddingEnd:q(o.paddingRight)}})}})}),A=s.forwardRef((e,r)=>{let{sizes:t,onSizesChange:a,...n}=e,i=b(E,e.__scopeScrollArea),[o,c]=s.useState(),d=s.useRef(null),h=(0,u.e)(r,d,i.onScrollbarYChange);return s.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),(0,l.jsx)(M,{"data-orientation":"vertical",...n,ref:h,sizes:t,style:{top:0,right:"ltr"===i.dir?0:void 0,left:"rtl"===i.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":V(t)+"px",...e.style},onThumbPointerDown:r=>e.onThumbPointerDown(r.y),onDragScroll:r=>e.onDragScroll(r.y),onWheelScroll:(r,t)=>{if(i.viewport){let l=i.viewport.scrollTop+r.deltaY;e.onWheelScroll(l),function(e,r){return e>0&&e<r}(l,t)&&r.preventDefault()}},onResize:()=>{d.current&&i.viewport&&o&&a({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:q(o.paddingTop),paddingEnd:q(o.paddingBottom)}})}})}),[z,D]=w(E),M=s.forwardRef((e,r)=>{let{__scopeScrollArea:t,sizes:a,hasThumb:n,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:d,onThumbPositionChange:h,onDragScroll:x,onWheelScroll:m,onResize:f,...g}=e,w=b(E,t),[j,y]=s.useState(null),N=(0,u.e)(r,e=>y(e)),S=s.useRef(null),C=s.useRef(""),R=w.viewport,_=a.content-a.viewport,P=(0,p.W)(m),k=(0,p.W)(h),T=B(f,10);function L(e){S.current&&x({x:e.clientX-S.current.left,y:e.clientY-S.current.top})}return s.useEffect(()=>{let e=e=>{let r=e.target;j?.contains(r)&&P(e,_)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[R,j,_,P]),s.useEffect(k,[a,k]),G(j,T),G(w.content,T),(0,l.jsx)(z,{scope:t,scrollbar:j,hasThumb:n,onThumbChange:(0,p.W)(i),onThumbPointerUp:(0,p.W)(o),onThumbPositionChange:k,onThumbPointerDown:(0,p.W)(d),children:(0,l.jsx)(c.WV.div,{...g,ref:N,style:{position:"absolute",...g.style},onPointerDown:(0,v.M)(e.onPointerDown,e=>{0===e.button&&(e.target.setPointerCapture(e.pointerId),S.current=j.getBoundingClientRect(),C.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",w.viewport&&(w.viewport.style.scrollBehavior="auto"),L(e))}),onPointerMove:(0,v.M)(e.onPointerMove,L),onPointerUp:(0,v.M)(e.onPointerUp,e=>{let r=e.target;r.hasPointerCapture(e.pointerId)&&r.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=C.current,w.viewport&&(w.viewport.style.scrollBehavior=""),S.current=null})})})}),Z="ScrollAreaThumb",W=s.forwardRef((e,r)=>{let{forceMount:t,...s}=e,a=D(Z,e.__scopeScrollArea);return(0,l.jsx)(d.z,{present:t||a.hasThumb,children:(0,l.jsx)(O,{ref:r,...s})})}),O=s.forwardRef((e,r)=>{let{__scopeScrollArea:t,style:a,...n}=e,i=b(Z,t),o=D(Z,t),{onThumbPositionChange:d}=o,h=(0,u.e)(r,e=>o.onThumbChange(e)),p=s.useRef(),x=B(()=>{p.current&&(p.current(),p.current=void 0)},100);return s.useEffect(()=>{let e=i.viewport;if(e){let r=()=>{if(x(),!p.current){let r=F(e,d);p.current=r,d()}};return d(),e.addEventListener("scroll",r),()=>e.removeEventListener("scroll",r)}},[i.viewport,x,d]),(0,l.jsx)(c.WV.div,{"data-state":o.hasThumb?"visible":"hidden",...n,ref:h,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...a},onPointerDownCapture:(0,v.M)(e.onPointerDownCapture,e=>{let r=e.target.getBoundingClientRect(),t=e.clientX-r.left,l=e.clientY-r.top;o.onThumbPointerDown({x:t,y:l})}),onPointerUp:(0,v.M)(e.onPointerUp,o.onThumbPointerUp)})});W.displayName=Z;var H="ScrollAreaCorner",I=s.forwardRef((e,r)=>{let t=b(H,e.__scopeScrollArea),s=!!(t.scrollbarX&&t.scrollbarY);return"scroll"!==t.type&&s?(0,l.jsx)(Y,{...e,ref:r}):null});I.displayName=H;var Y=s.forwardRef((e,r)=>{let{__scopeScrollArea:t,...a}=e,n=b(H,t),[i,o]=s.useState(0),[d,h]=s.useState(0),u=!!(i&&d);return G(n.scrollbarX,()=>{let e=n.scrollbarX?.offsetHeight||0;n.onCornerHeightChange(e),h(e)}),G(n.scrollbarY,()=>{let e=n.scrollbarY?.offsetWidth||0;n.onCornerWidthChange(e),o(e)}),u?(0,l.jsx)(c.WV.div,{...a,ref:r,style:{width:i,height:d,position:"absolute",right:"ltr"===n.dir?0:void 0,left:"rtl"===n.dir?0:void 0,bottom:0,...e.style}}):null});function q(e){return e?parseInt(e,10):0}function $(e,r){let t=e/r;return isNaN(t)?0:t}function V(e){let r=$(e.viewport,e.content),t=e.scrollbar.paddingStart+e.scrollbar.paddingEnd;return Math.max((e.scrollbar.size-t)*r,18)}function X(e,r,t="ltr"){let l=V(r),s=r.scrollbar.paddingStart+r.scrollbar.paddingEnd,a=r.scrollbar.size-s,n=r.content-r.viewport,i=(0,f.u)(e,"ltr"===t?[0,n]:[-1*n,0]);return U([0,n],[0,a-l])(i)}function U(e,r){return t=>{if(e[0]===e[1]||r[0]===r[1])return r[0];let l=(r[1]-r[0])/(e[1]-e[0]);return r[0]+l*(t-e[0])}}var F=(e,r=()=>{})=>{let t={left:e.scrollLeft,top:e.scrollTop},l=0;return function s(){let a={left:e.scrollLeft,top:e.scrollTop},n=t.left!==a.left,i=t.top!==a.top;(n||i)&&r(),t=a,l=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(l)};function B(e,r){let t=(0,p.W)(e),l=s.useRef(0);return s.useEffect(()=>()=>window.clearTimeout(l.current),[]),s.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(t,r)},[t,r])}function G(e,r){let t=(0,p.W)(r);(0,m.b)(()=>{let r=0;if(e){let l=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(t)});return l.observe(e),()=>{window.cancelAnimationFrame(r),l.unobserve(e)}}},[e,t])}var J=t(68637);let K=s.forwardRef(({className:e,children:r,...t},s)=>(0,l.jsxs)(N,{ref:s,className:(0,J.cn)("relative overflow-hidden",e),...t,children:[l.jsx(C,{className:"h-full w-full rounded-[inherit]",children:r}),l.jsx(Q,{}),l.jsx(I,{})]}));K.displayName=N.displayName;let Q=s.forwardRef(({className:e,orientation:r="vertical",...t},s)=>l.jsx(R,{ref:s,orientation:r,className:(0,J.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...t,children:l.jsx(W,{className:"relative flex-1 rounded-full bg-border"})}));Q.displayName=R.displayName;var ee="horizontal",er=["horizontal","vertical"],et=s.forwardRef((e,r)=>{let{decorative:t,orientation:s=ee,...a}=e,n=er.includes(s)?s:ee;return(0,l.jsx)(c.WV.div,{"data-orientation":n,...t?{role:"none"}:{"aria-orientation":"vertical"===n?n:void 0,role:"separator"},...a,ref:r})});et.displayName="Separator";let el=s.forwardRef(({className:e,orientation:r="horizontal",decorative:t=!0,...s},a)=>l.jsx(et,{ref:a,decorative:t,orientation:r,className:(0,J.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",e),...s}));el.displayName=et.displayName;var es=t(10333),ea=t(94437),en=t(71945);let ei=(0,en.Z)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);var eo=t(77185);let ec=(0,en.Z)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);var ed=t(91046),eh=t(18541),eu=t(32317),ep=t(62392);function ex(){let{data:e,status:r}=(0,a.useSession)(),[t,c]=(0,s.useState)([]),[d,h]=(0,s.useState)(""),[u,p]=(0,s.useState)(!1),[x,m]=(0,s.useState)(null),f=(0,s.useRef)(null);if("loading"===r)return l.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,l.jsxs)("div",{className:"text-center",children:[l.jsx(es.Z,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),l.jsx("p",{children:"Загрузка..."})]})});if(!e)return l.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,l.jsxs)(o.Zb,{className:"w-full max-w-md",children:[l.jsx(o.Ol,{className:"text-center",children:l.jsx(o.ll,{children:"Необходима авторизация"})}),(0,l.jsxs)(o.aY,{className:"text-center",children:[l.jsx("p",{className:"text-gray-600 mb-4",children:"Войдите в систему для использования AI поиска"}),l.jsx(n.z,{asChild:!0,children:l.jsx(ep.default,{href:"/auth/signin",children:"Войти"})})]})]})});let v=async e=>{if(e.preventDefault(),!d.trim()||u)return;let r={id:Date.now().toString(),role:"user",content:d.trim(),timestamp:new Date};c(e=>[...e,r]),h(""),p(!0);try{let e=await fetch("/api/ai-search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:d.trim(),context:"chat"})});if(!e.ok)throw Error("Failed to get AI response");let r=e.headers.get("X-Search-Results");if(r)try{m(JSON.parse(r))}catch(e){console.error("Failed to parse search results:",e)}let t=e.body?.getReader(),l=new TextDecoder,s={id:(Date.now()+1).toString(),role:"assistant",content:"",timestamp:new Date};if(c(e=>[...e,s]),t){let e="";for(;;){let{done:r,value:a}=await t.read();if(r)break;let n=l.decode(a,{stream:!0}),i=(e+=n).split("\n");for(let r of(e=i.pop()||"",i))if(r.startsWith("data: ")){let e=r.slice(6);if("[DONE]"===e)break;try{let r=JSON.parse(e),t=r.choices?.[0]?.delta?.content||"";t&&(s.content+=t,c(e=>e.map(e=>e.id===s.id?{...e,content:s.content}:e)))}catch(e){}}}}}catch(r){console.error("Error:",r);let e={id:(Date.now()+1).toString(),role:"assistant",content:"Извините, произошла ошибка при обработке вашего запроса. Попробуйте еще раз.",timestamp:new Date};c(r=>[...r,e])}finally{p(!1)}};return(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsx("div",{className:"lg:col-span-2",children:(0,l.jsxs)(o.Zb,{className:"h-[600px] flex flex-col",children:[l.jsx(o.Ol,{className:"flex-shrink-0",children:(0,l.jsxs)(o.ll,{className:"flex items-center",children:[l.jsx(ea.Z,{className:"h-5 w-5 mr-2"}),"AI Консультант"]})}),(0,l.jsxs)(o.aY,{className:"flex-1 flex flex-col",children:[(0,l.jsxs)(K,{className:"flex-1 pr-4",children:[(0,l.jsxs)("div",{className:"space-y-4",children:[0===t.length&&(0,l.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[l.jsx(ei,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),l.jsx("p",{children:"Задайте вопрос о хирургии, медицинских процедурах или найдите нужные курсы"})]}),t.map(e=>l.jsx("div",{className:`flex ${"user"===e.role?"justify-end":"justify-start"}`,children:(0,l.jsxs)("div",{className:`flex max-w-[80%] ${"user"===e.role?"flex-row-reverse":"flex-row"}`,children:[l.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${"user"===e.role?"bg-blue-600 ml-3":"bg-gray-200 mr-3"}`,children:"user"===e.role?l.jsx(eo.Z,{className:"h-4 w-4 text-white"}):l.jsx(ei,{className:"h-4 w-4 text-gray-600"})}),(0,l.jsxs)("div",{className:`rounded-lg p-3 ${"user"===e.role?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"}`,children:[l.jsx("p",{className:"text-sm whitespace-pre-wrap",children:e.content}),l.jsx("p",{className:`text-xs mt-2 ${"user"===e.role?"text-blue-100":"text-gray-500"}`,children:(0,J.p6)(e.timestamp)})]})]})},e.id)),u&&l.jsx("div",{className:"flex justify-start",children:(0,l.jsxs)("div",{className:"flex",children:[l.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-gray-200 mr-3 flex items-center justify-center",children:l.jsx(ei,{className:"h-4 w-4 text-gray-600"})}),l.jsx("div",{className:"bg-gray-100 rounded-lg p-3",children:(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[l.jsx(es.Z,{className:"h-4 w-4 animate-spin"}),l.jsx("span",{className:"text-sm",children:"Анализирую запрос..."})]})})]})})]}),l.jsx("div",{ref:f})]}),(0,l.jsxs)("form",{onSubmit:v,className:"flex space-x-2 pt-4 border-t",children:[l.jsx(i.I,{value:d,onChange:e=>h(e.target.value),placeholder:"Задайте вопрос о хирургии, поищите курсы...",disabled:u,className:"flex-1"}),l.jsx(n.z,{type:"submit",disabled:u||!d.trim(),children:u?l.jsx(es.Z,{className:"h-4 w-4 animate-spin"}):l.jsx(ec,{className:"h-4 w-4"})})]})]})]})}),(0,l.jsxs)("div",{className:"lg:col-span-1",children:[(0,l.jsxs)(o.Zb,{children:[l.jsx(o.Ol,{children:(0,l.jsxs)(o.ll,{className:"flex items-center",children:[l.jsx(ed.Z,{className:"h-5 w-5 mr-2"}),"Результаты поиска"]})}),l.jsx(o.aY,{children:x?(0,l.jsxs)("div",{className:"space-y-4",children:[x.courses.length>0&&(0,l.jsxs)("div",{children:[(0,l.jsxs)("h4",{className:"font-medium text-sm text-gray-900 mb-2 flex items-center",children:[l.jsx(eh.Z,{className:"h-4 w-4 mr-1"}),"Курсы"]}),l.jsx("div",{className:"space-y-2",children:x.courses.map(e=>(0,l.jsxs)(ep.default,{href:`/courses/${e.slug}`,className:"block p-2 border rounded hover:bg-gray-50",children:[l.jsx("h5",{className:"font-medium text-sm text-gray-900 line-clamp-2",children:e.title}),l.jsx("p",{className:"text-xs text-gray-600 mt-1",children:e.category.name})]},e.id))})]}),x.articles.length>0&&(0,l.jsxs)("div",{children:[l.jsx(el,{}),(0,l.jsxs)("h4",{className:"font-medium text-sm text-gray-900 mb-2 flex items-center pt-4",children:[l.jsx(eu.Z,{className:"h-4 w-4 mr-1"}),"Статьи"]}),l.jsx("div",{className:"space-y-2",children:x.articles.map(e=>(0,l.jsxs)(ep.default,{href:`/articles/${e.slug}`,className:"block p-2 border rounded hover:bg-gray-50",children:[l.jsx("h5",{className:"font-medium text-sm text-gray-900 line-clamp-2",children:e.title}),l.jsx("p",{className:"text-xs text-gray-600 mt-1",children:e.category.name})]},e.id))})]}),0===x.courses.length&&0===x.articles.length&&l.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"Нет результатов поиска"})]}):l.jsx("p",{className:"text-sm text-gray-500 text-center py-8",children:"Результаты поиска появятся здесь после запроса"})})]}),(0,l.jsxs)(o.Zb,{className:"mt-4",children:[l.jsx(o.Ol,{children:l.jsx(o.ll,{className:"text-sm",children:"Быстрые действия"})}),(0,l.jsxs)(o.aY,{className:"space-y-2",children:[l.jsx(n.z,{variant:"outline",size:"sm",className:"w-full justify-start text-xs",asChild:!0,children:(0,l.jsxs)(ep.default,{href:"/courses",children:[l.jsx(eh.Z,{className:"h-3 w-3 mr-2"}),"Все курсы"]})}),l.jsx(n.z,{variant:"outline",size:"sm",className:"w-full justify-start text-xs",asChild:!0,children:(0,l.jsxs)(ep.default,{href:"/articles",children:[l.jsx(eu.Z,{className:"h-3 w-3 mr-2"}),"Все статьи"]})}),l.jsx(n.z,{variant:"outline",size:"sm",className:"w-full justify-start text-xs",asChild:!0,children:(0,l.jsxs)(ep.default,{href:"/fhir",children:[l.jsx(ed.Z,{className:"h-3 w-3 mr-2"}),"FHIR Данные"]})})]})]})]})]})}},23803:(e,r,t)=>{"use strict";t.d(r,{Ol:()=>i,SZ:()=>c,Zb:()=>n,aY:()=>d,eW:()=>h,ll:()=>o});var l=t(62901),s=t(24383),a=t(68637);let n=s.forwardRef(({className:e,...r},t)=>l.jsx("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...r}));n.displayName="Card";let i=s.forwardRef(({className:e,...r},t)=>l.jsx("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",e),...r}));i.displayName="CardHeader";let o=s.forwardRef(({className:e,...r},t)=>l.jsx("h3",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",e),...r}));o.displayName="CardTitle";let c=s.forwardRef(({className:e,...r},t)=>l.jsx("p",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",e),...r}));c.displayName="CardDescription";let d=s.forwardRef(({className:e,...r},t)=>l.jsx("div",{ref:t,className:(0,a.cn)("p-6 pt-0",e),...r}));d.displayName="CardContent";let h=s.forwardRef(({className:e,...r},t)=>l.jsx("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",e),...r}));h.displayName="CardFooter"},10333:(e,r,t)=>{"use strict";t.d(r,{Z:()=>l});let l=(0,t(71945).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},77185:(e,r,t)=>{"use strict";t.d(r,{Z:()=>l});let l=(0,t(71945).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},99443:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>h});var l=t(83537),s=t(3995),a=t(32944),n=t(24429);let i=(0,t(88895).createProxy)(String.raw`/home/ubuntu/surgical_research_platform/nextjs_space/components/pages/client-ai-search.tsx#ClientAISearch`);var o=t(93620);let c=(0,t(89004).Z)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);function d(){return(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsx("div",{className:"lg:col-span-2",children:l.jsx("div",{className:"h-[600px] flex items-center justify-center bg-white rounded-lg border",children:(0,l.jsxs)("div",{className:"text-center",children:[l.jsx(o.Z,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),l.jsx("p",{children:"Загрузка AI поиска..."})]})})}),l.jsx("div",{className:"lg:col-span-1",children:l.jsx("div",{className:"h-32 bg-white rounded-lg border flex items-center justify-center",children:l.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded animate-pulse"})})})]})}function h(){return(0,l.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[l.jsx(a.h,{}),(0,l.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[l.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-100 to-purple-100 rounded-lg",children:l.jsx(c,{className:"h-6 w-6 text-blue-600"})}),l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"AI Поиск и Анализ"})]}),l.jsx("p",{className:"text-gray-600",children:"Используйте искусственный интеллект для поиска и анализа медицинского контента"})]}),l.jsx(s.Suspense,{fallback:l.jsx(d,{}),children:l.jsx(i,{})})]}),l.jsx(n.$,{})]})}},89004:(e,r,t)=>{"use strict";t.d(r,{Z:()=>o});var l=t(3995);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=(...e)=>e.filter((e,r,t)=>!!e&&t.indexOf(e)===r).join(" ");var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,l.forwardRef)(({color:e="currentColor",size:r=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:i="",children:o,iconNode:c,...d},h)=>(0,l.createElement)("svg",{ref:h,...n,width:r,height:r,stroke:e,strokeWidth:s?24*Number(t)/Number(r):t,className:a("lucide",i),...d},[...c.map(([e,r])=>(0,l.createElement)(e,r)),...Array.isArray(o)?o:[o]])),o=(e,r)=>{let t=(0,l.forwardRef)(({className:t,...n},o)=>(0,l.createElement)(i,{ref:o,iconNode:r,className:a(`lucide-${s(e)}`,t),...n}));return t.displayName=`${e}`,t}},93620:(e,r,t)=>{"use strict";t.d(r,{Z:()=>l});let l=(0,t(89004).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},6806:(e,r,t)=>{"use strict";t.d(r,{Z:()=>l});let l=(0,t(89004).Z)("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]])},15601:(e,r,t)=>{"use strict";t.d(r,{Z:()=>l});let l=(0,t(89004).Z)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},85168:(e,r,t)=>{"use strict";t.d(r,{default:()=>s.a});var l=t(86236),s=t.n(l)},86236:(e,r,t)=>{"use strict";let{createProxy:l}=t(88895);e.exports=l("/opt/hostedapp/node/root/app/node_modules/next/dist/client/link.js")},48546:(e,r,t)=>{"use strict";function l(e,[r,t]){return Math.min(t,Math.max(r,e))}t.d(r,{u:()=>l})}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),l=r.X(0,[372,38,594,718,847,437,552],()=>t(67097));module.exports=l})();